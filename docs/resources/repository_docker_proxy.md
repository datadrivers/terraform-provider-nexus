---
page_title: "Resource nexus_repository_docker_proxy"
subcategory: "Repository"
description: |-
  Use this resource to create a docker proxy repository.
---
# Resource nexus_repository_docker_proxy
Use this resource to create a docker proxy repository.
## Example Usage
```terraform
resource "nexus_repository_docker_proxy" "dockerhub" {
  name   = "dockerhub"
  online = true

  docker {
    force_basic_auth = false
    v1_enabled       = false
    subdomain        = "docker" # Pro-only
  }

  docker_proxy {
    index_type = "HUB"
  }

  storage {
    blob_store_name                = "default"
    strict_content_type_validation = true
  }

  proxy {
    remote_url       = "https://registry-1.docker.io"
    content_max_age  = 1440
    metadata_max_age = 1440
  }

  negative_cache {
    enabled = true
    ttl     = 1440
  }

  http_client {
    blocked    = false
    auto_block = true
  }
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `docker` (Block List, Min: 1, Max: 1) docker contains the configuration of the docker repository (see [below for nested schema](#nestedblock--docker))
- `docker_proxy` (Block List, Min: 1, Max: 1) docker_proxy contains the configuration of the docker index (see [below for nested schema](#nestedblock--docker_proxy))
- `http_client` (Block List, Min: 1, Max: 1) HTTP Client configuration for proxy repositories (see [below for nested schema](#nestedblock--http_client))
- `name` (String) A unique identifier for this repository
- `negative_cache` (Block List, Min: 1, Max: 1) Configuration of the negative cache handling (see [below for nested schema](#nestedblock--negative_cache))
- `proxy` (Block List, Min: 1, Max: 1) Configuration for the proxy repository (see [below for nested schema](#nestedblock--proxy))
- `storage` (Block List, Min: 1, Max: 1) The storage configuration of the repository (see [below for nested schema](#nestedblock--storage))

### Optional

- `cleanup` (Block List) Cleanup policies (see [below for nested schema](#nestedblock--cleanup))
- `online` (Boolean) Whether this repository accepts incoming requests
- `routing_rule` (String) The name of the routing rule assigned to this repository

### Read-Only

- `id` (String) Used to identify resource at nexus

<a id="nestedblock--docker"></a>
### Nested Schema for `docker`

Required:

- `force_basic_auth` (Boolean) Whether to force authentication (Docker Bearer Token Realm required if false)
- `v1_enabled` (Boolean) Whether to allow clients to use the V1 API to interact with this repository

Optional:

- `http_port` (Number) Create an HTTP connector at specified port
- `https_port` (Number) Create an HTTPS connector at specified port
- `subdomain` (String) Pro-only: Whether to allow clients to use subdomain routing connector


<a id="nestedblock--docker_proxy"></a>
### Nested Schema for `docker_proxy`

Required:

- `index_type` (String) Type of Docker Index. Possible values: `HUB`, `REGISTRY` or `CUSTOM`

Optional:

- `cache_foreign_layers` (Boolean) Allow Nexus Repository Manager to download and cache foreign layers
- `foreign_layer_url_whitelist` (Set of String) A set of regular expressions used to identify URLs that are allowed for foreign layer requests
- `index_url` (String) Url of Docker Index to use


<a id="nestedblock--http_client"></a>
### Nested Schema for `http_client`

Required:

- `auto_block` (Boolean) Whether to auto-block outbound connections if remote peer is detected as unreachable/unresponsive
- `blocked` (Boolean) Whether to block outbound connections on the repository

Optional:

- `authentication` (Block List, Max: 1) Authentication configuration of the HTTP client (see [below for nested schema](#nestedblock--http_client--authentication))
- `connection` (Block List, Max: 1) Connection configuration of the HTTP client (see [below for nested schema](#nestedblock--http_client--connection))

<a id="nestedblock--http_client--authentication"></a>
### Nested Schema for `http_client.authentication`

Required:

- `type` (String) Authentication type. Possible values: `ntlm` or `username`

Optional:

- `ntlm_domain` (String) The ntlm domain to connect
- `ntlm_host` (String) The ntlm host to connect
- `password` (String, Sensitive) The password used by the proxy repository
- `username` (String) The username used by the proxy repository


<a id="nestedblock--http_client--connection"></a>
### Nested Schema for `http_client.connection`

Optional:

- `enable_circular_redirects` (Boolean) Whether to enable redirects to the same location (may be required by some servers)
- `enable_cookies` (Boolean) Whether to allow cookies to be stored and used
- `retries` (Number) Total retries if the initial connection attempt suffers a timeout
- `timeout` (Number) Seconds to wait for activity before stopping and retrying the connection
- `use_trust_store` (Boolean) Use certificates stored in the Nexus Repository Manager truststore to connect to external systems
- `user_agent_suffix` (String) Custom fragment to append to User-Agent header in HTTP requests



<a id="nestedblock--negative_cache"></a>
### Nested Schema for `negative_cache`

Required:

- `enabled` (Boolean) Whether to cache responses for content not present in the proxied repository
- `ttl` (Number) How long to cache the fact that a file was not found in the repository (in minutes)


<a id="nestedblock--proxy"></a>
### Nested Schema for `proxy`

Required:

- `remote_url` (String) Location of the remote repository being proxied

Optional:

- `content_max_age` (Number) How long (in minutes) to cache artifacts before rechecking the remote repository
- `metadata_max_age` (Number) How long (in minutes) to cache metadata before rechecking the remote repository.


<a id="nestedblock--storage"></a>
### Nested Schema for `storage`

Required:

- `blob_store_name` (String) Blob store used to store repository contents

Optional:

- `strict_content_type_validation` (Boolean) Whether to validate uploaded content's MIME type appropriate for the repository format


<a id="nestedblock--cleanup"></a>
### Nested Schema for `cleanup`

Optional:

- `policy_names` (Set of String) List of policy names
## Import
Import is supported using the following syntax:
```shell
# import using the name of repository
terraform import nexus_repository_docker_proxy.dockerhub dockerhub
```
